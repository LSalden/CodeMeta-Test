<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>write_codemeta — write_codemeta • codemetar</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>



<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- ropensci -->
<link href="../ropensci.css?nocache=123" rel="stylesheet">

<meta property="og:title" content="write_codemeta — write_codemeta" />
<meta property="og:description" content="write out a codemeta.json file for a given package.  This function is
basically a wrapper around create_codemeta() to both create the codemeta
object and write it out to a JSON-LD-formatted file in one command. It can
also be used simply to write out to JSON-LD any existing object created with
create_codemeta()." />
<meta name="twitter:card" content="summary" />






<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci" /></a>
        <a class="navbar-brand" href="../index.html"><i>codemetar <small>v0.1.8.9000</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/codemetar.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/examples-parsing-codemeta.html">Parsing Codemeta Data</a>
    </li>
    <li>
      <a href="../articles/articles/translating-codemeta.html">Translating between schema using JSON-LD</a>
    </li>
    <li>
      <a href="../articles/articles/validation-in-json-ld.html">Validation in JSON-LD</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/codemetar">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>write_codemeta</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/codemetar/blob/master/R/write_codemeta.R'><code>R/write_codemeta.R</code></a></small>
    <div class="hidden name"><code>write_codemeta.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>write out a codemeta.json file for a given package.  This function is
basically a wrapper around create_codemeta() to both create the codemeta
object and write it out to a JSON-LD-formatted file in one command. It can
also be used simply to write out to JSON-LD any existing object created with
<code><a href='create_codemeta.html'>create_codemeta()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>write_codemeta</span>(
  <span class='kw'>pkg</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"codemeta.json"</span>,
  <span class='kw'>root</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>use_filesize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>force_update</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"codemeta_force_update"</span>, <span class='fl'>TRUE</span>),
  <span class='kw'>use_git_hook</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>write_minimeta</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pkg</th>
      <td><p>package path to package root, or package name, or description file
(character), or a codemeta object (list)</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>file name of the output, leave at default "codemeta.json"</p></td>
    </tr>
    <tr>
      <th>root</th>
      <td><p>if pkg is a codemeta object, optionally give the path to package
root. Default guess is current dir.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>identifier for the package, e.g. a DOI (or other resolvable URL)</p></td>
    </tr>
    <tr>
      <th>use_filesize</th>
      <td><p>whether to try to estimating and adding a filesize by using
<code><a href='https://rdrr.io/r/base/file.info.html'>base::file.size()</a></code>. Files in <code>.Rbuildignore</code> are ignored.</p></td>
    </tr>
    <tr>
      <th>force_update</th>
      <td><p>Update guessed fields even if they are defined in an
existing codemeta.json file</p></td>
    </tr>
    <tr>
      <th>use_git_hook</th>
      <td><p>Deprecated argument.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Whether to print messages indicating opinions e.g. when
DESCRIPTION has no URL. -- See <code><a href='give_opinions.html'>give_opinions</a></code>;
and indicating the progress of internet downloads.</p></td>
    </tr>
    <tr>
      <th>write_minimeta</th>
      <td><p>whether to also create the file schemaorg.json that
corresponds to the metadata Google would validate, to be inserted to a
webpage for SEO. It is saved as "inst/schemaorg.json" alongside <code>path</code> (by
default, "codemeta.json").</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments to <code>write_json</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>writes out the codemeta.json file, and schemaorg.json if <code>write_codemeta</code>
is <code>TRUE</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><strong>Why bother creating a codemeta.json for your package?</strong> R packages
encode lots of metadata in the <code>DESCRIPTION</code> file, <code>README</code>, and other
places, telling users and developers about the package purpose, authors,
license, dependencies, and other information that facilitates discovery,
adoption, and credit for your software. Unfortunately, because each
software language records this metadata in a different format, that
information is hard for search engines, software repositories, and other
developers to find and integrate.</p>
<p>By generating a <code>codemeta.json</code> file, you turn your metadata into a
format that can easily crosswalk between metadata in many other software
languages. CodeMeta is built on <a href='https://schema.org'>schema.org</a> a
simple <a href='https://developers.google.com/search/docs/guides/intro-structured-data'>structured data</a>
format developed by major search engines like Google and Bing to improve
discoverability in search. CodeMeta is also understood by significant
software archiving efforts such as <a href='https://www.softwareheritage.org/'>Software Heritage</a> Project, which seeks to
permanently archive all open source software.</p>
<p>For more general information about the CodeMeta Project for defining
software metadata, see <a href='https://codemeta.github.io'>https://codemeta.github.io</a>. In particular, new
users might want to start with the <a href='https://codemeta.github.io/user-guide/'>User Guide</a>, while those looking to
learn more about JSON-LD and consuming existing codemeta files should
see the <a href='https://codemeta.github.io/developer-guide/'>Developer Guide</a>.</p>
<p><strong>How to keep codemeta.json up-to-date?</strong> In particular, how to keep it
up to date with <code>DESCRIPTION</code>? <code>codemetar</code> itself no longer supports
automatic sync, but there are quite a few methods available out there.
Choose one that fits well into your workflow!</p><ul>
<li><p>You could rely on <code><a href='https://devtools.r-lib.org//reference/release.html'>devtools::release()</a></code> since it will ask you
whether you updated codemeta.json when such a file exists.</p></li>
<li><p>You could use a git pre-commit hook that prevents a commit from
being done if DESCRIPTION is newer than codemeta.json.</p><ul>
<li><p>You can use the <a href='https://github.com/lorenzwalthert/precommit'>precommit package</a> in which
there’s a “codemeta-description-updated” hook.</p></li>
<li><p>If that’s your only pre-commit hook (i.e. you don’t have one
created by e.g. <code><a href='https://usethis.r-lib.org/reference/use_readme_rmd.html'>usethis::use_readme_rmd()</a></code>), then you can
create it using</p></li>
</ul></li>
</ul><p><!-- end list -->

<div class="r"></p><pre><span class='no'>script</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/readLines.html'>readLines</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"templates"</span>, <span class='st'>"description-codemetajson-pre-commit.sh"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"codemetar"</span>))
<span class='kw pkg'>usethis</span><span class='kw ns'>::</span><span class='fu'><a href='https://usethis.r-lib.org/reference/use_git_hook.html'>use_git_hook</a></span>(<span class='st'>"pre-commit"</span>,
                     <span class='kw'>script</span> <span class='kw'>=</span> <span class='no'>script</span>)</pre><p></div></p><ul>
<li><p>You could use GitHub actions. Refer to GitHub actions docs
<a href='https://github.com/features/actions'>https://github.com/features/actions</a>, and to the example workflow
provided in this package (type <code><a href='https://rdrr.io/r/base/system.file.html'>system.file("templates", "codemeta-github-actions.yml", package = "codemetar")</a></code>). You can use
the <code>cm-skip</code> keyword in your commit message if you don’t want this
to run on a specific commit. The example workflow provided is setup
to only run when a push is made to the master branch. This setup is
designed for if you’re using a <a href='https://nvie.com/posts/a-successful-git-branching-model/#the-main-branches'>git flow</a>
setup where the master branch is only committed and pushed to via
pull requests. After each PR merge (and the completion of this
GitHub action), your master branch will always be up to date and so
long as you don’t make manual changes to the codemeta.json file, you
won’t have merge conflicts.</p></li>
</ul>

<p>Alternatively, you can have GitHub actions route run <code>codemetar</code> on each
commit. If you do this you should try to remember to run <code>git pull</code>
before making any new changes on your local project. However, if you
forgot to pull and already committed new changes, fret not, you can use
(<a href='https://stackoverflow.com/questions/18930527/difference-between-git-pull-and-git-pull-rebase/38139843#38139843'><code>git pull --rebase</code></a>)
to rewind you local changes on top of the current upstream <code>HEAD</code>.
<details closed>


<summary> <span title="Click to Expand"> click here to see the workflow
</span> </summary>

<div class="yaml"></p><pre>
on:
  push:
    branches: master
    paths:
      - DESCRIPTION
      - .github/workflows/main.yml

name: Render codemeta
jobs:
  render:
    name: Render codemeta
    runs-on: macOS-latest
    if: "!contains(github.event.head_commit.message, 'cm-skip')"
    steps:
      - uses: actions/checkout@v1
      - uses: r-lib/actions/setup-r@v1
      - name: Install codemetar
        run: Rscript -e 'install.packages("codemetar")'
      - name: Render codemeta
        run: Rscript -e 'codemetar::write_codemeta()'
      - name: Commit results
        run: |
          git commit codemeta.json -m 'Re-build codemeta.json' || echo "No changes to commit"
          git push https://${{github.actor}}:${{secrets.GITHUB_TOKEN}}@github.com/${{github.repository}}.git HEAD:${{ github.ref }} || echo "No changes to commit"
</pre><p></div>
</details>


<br></p>
    <h2 class="hasAnchor" id="technical-details"><a class="anchor" href="#technical-details"></a>Technical details</h2>

    

<p>If pkg is a codemeta object, the function will attempt to update any
fields it can guess (i.e. from the DESCRIPTION file), overwriting any
existing data in that block. In this case, the package root directory
should be the current working directory.</p>
<p>When creating and writing a codemeta.json for the first time, the function
adds "codemeta.json" to .Rbuildignore.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='no'>codemeta</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>()
<span class='fu'>write_codemeta</span>(<span class='st'>"codemetar"</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>codemeta</span>)</div><div class='output co'>#&gt; … Getting sysreqs URL from sysreqs API
#&gt; ✓ Got sysreqs URL from sysreqs API!
#&gt; … Asking README URL from GitHub API
#&gt; ✓ Got README URL!
#&gt; … Asking README URL from GitHub API
#&gt; ✓ Got README URL!
#&gt; … Getting repo topics from GitHub API
#&gt; ✓ Got repo topics!</div><div class='input'># }
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- begin footer -->
<div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg" /></div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Info</h5>
                            <li><a href="https://ropensci.org/about">Mission</a></li>
                            <li><a href="https://ropensci.org/about#team">Team</a></li>
                            <li><a href="https://ropensci.org/about#collaborators">Collaborators</a></li>
                            <li><a href="https://ropensci.org/careers">Careers</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Work</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/blog/">Blog</a></li>
                            <li><a href="https://ropensci.org/technotes/">Tech Notes</a></li>
                            <li><a href="https://ropensci.org/tutorials/">Tutorials</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/resources/">More Resources</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Participate</h5>
                            <li><a href="https://ropensci.org/contact/">Contact us</a></li>
                            <li><a href="https://ropensci.org/community/">Community</a></li>
                            <li><a href="https://ropensci.org/software-review/">Contribute software</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/donate/">Donate</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
   </div>

  


  </body>
</html>


